<!-- templates/myapp/task_list.html -->
{% extends 'base.html' %}

{% block title %}Task List - TODO App{% endblock %}

{% block content %}
<div class="task-list">
    <h1>ğŸ“ My Tasks</h1>
    
    <div class="stats" style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
        <p><strong>Total:</strong> {{ total_tasks }} | 
           <strong>Completed:</strong> {{ completed_tasks }} | 
           <strong>Pending:</strong> {{ total_tasks|add:"-"|add:completed_tasks }}</p>
    </div>
    
    <a href="{% url 'task_create' %}" 
       style="display: inline-block; padding: 10px 20px; background: #28a745; color: white; 
              text-decoration: none; border-radius: 4px; margin-bottom: 20px;">
        â• Add New Task
    </a>
    
    {% if tasks %}
        <div class="tasks">
            {% for task in tasks %}
            <div class="task-item" style="padding: 15px; margin-bottom: 10px; background: white; 
                                          border: 1px solid #ddd; border-radius: 4px;
                                          {% if task.completed %}opacity: 0.6;{% endif %}">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div style="flex: 1;">
                        <h3 style="margin: 0 0 10px 0; {% if task.completed %}text-decoration: line-through;{% endif %}">
                            {{ task.title }}
                        </h3>
                        
                        {% if task.description %}
                        <p style="color: #666; margin: 5px 0;">{{ task.description }}</p>
                        {% endif %}
                        
                        <div style="margin-top: 10px; font-size: 0.9em; color: #888;">
                            <span style="padding: 3px 8px; background: 
                                {% if task.priority == 'high' %}#dc3545{% elif task.priority == 'medium' %}#ffc107{% else %}#17a2b8{% endif %}; 
                                color: white; border-radius: 3px; margin-right: 10px;">
                                {{ task.get_priority_display }}
                            </span>
                            
                            {% if task.due_date %}
                            <span>ğŸ“… Due: {{ task.due_date|date:"M d, Y" }}</span>
                            {% endif %}
                            
                            <span style="margin-left: 10px;">Created: {{ task.created_at|date:"M d, Y" }}</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-left: 20px;">
                        <a href="{% url 'task_toggle_complete' task.pk %}" 
                           style="padding: 5px 10px; background: {% if task.completed %}#6c757d{% else %}#28a745{% endif %}; 
                                  color: white; text-decoration: none; border-radius: 4px; font-size: 0.9em;">
                            {% if task.completed %}â†©ï¸ Undo{% else %}âœ“ Done{% endif %}
                        </a>
                        
                        <a href="{% url 'task_update' task.pk %}" 
                           style="padding: 5px 10px; background: #007bff; color: white; 
                                  text-decoration: none; border-radius: 4px; font-size: 0.9em;">
                            âœï¸ Edit
                        </a>
                        
                        <a href="{% url 'task_delete' task.pk %}" 
                           style="padding: 5px 10px; background: #dc3545; color: white; 
                                  text-decoration: none; border-radius: 4px; font-size: 0.9em;">
                            ğŸ—‘ï¸ Delete
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="padding: 40px; text-align: center; background: #f8f9fa; border-radius: 8px;">
            <p style="font-size: 1.2em; color: #666;">No tasks yet. Create your first task!</p>
        </div>
    {% endif %}
</div>
{% endblock %}